{"version":3,"sources":["components/ReplyWithMessage/index.js"],"names":["CALL_YOU","CALL_ME","ON_MY_WAY","CUSTOM_MESSAGE","MINS","HOURS","DAYS","cleanRegex","TimeInput","props","timeInput","timeValue","onTimeValueChange","inputRef","onSelectTimeUnit","timeUnit","timeUnitSelected","getString","currentLocale","propTypes","string","isRequired","number","func","defaultProps","ReplyWithMessage","state","type","customValue","callYouTimeValue","callYouTimeUnit","callMeTimeValue","callMeTimeUnit","onSelectType","index","setState","onChange","_getValue","onCustomValueChange","e","value","target","onCallYouTimeValueChange","replace","onCallYouTimeUnitChange","unit","onCallMeTimeValueChange","onCallMeTimeUnitChange","onReply","onCallYouInputRef","input","callYouInputRef","onCallMeInputRef","callMeInputRef","replyType","replyText","callbackDirection","timeUnits","className","onCancel","disableButton","root","messages","setTimeout","focus","messageItem","active","label","inputField","customValueInput","buttonGroup","cancelButton","replyButton","disabled","buttonText","undefined"],"mappings":"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","file":"index.js","sourcesContent":["import React, { Component } from 'react';\nimport PropTypes from 'prop-types';\nimport classnames from 'classnames';\nimport isBlank from 'ringcentral-integration/lib/isBlank';\n\nimport Button from '../Button';\n\nimport styles from './styles.scss';\nimport i18n from './i18n';\n\nconst CALL_YOU = 0;\nconst CALL_ME = 1;\nconst ON_MY_WAY = 2;\nconst CUSTOM_MESSAGE = 3;\n\nconst MINS = 0;\nconst HOURS = 1;\nconst DAYS = 2;\n\nconst cleanRegex = /[^\\d]/g;\n\nfunction TimeInput(props) {\n  return (\n    <div className={styles.timeInput}>\n      <span className={styles.timeValue}>\n        <input\n          maxLength={2}\n          value={props.timeValue}\n          onChange={props.onTimeValueChange}\n          ref={props.inputRef}\n        />\n      </span>\n      <span\n        onClick={() => props.onSelectTimeUnit(MINS)}\n        className={props.timeUnit === MINS ? styles.timeUnitSelected : null}>\n        {i18n.getString('min', props.currentLocale)}\n      </span>\n      <span\n        className={props.timeUnit === HOURS ? styles.timeUnitSelected : null}\n        onClick={() => props.onSelectTimeUnit(HOURS)}>\n        {i18n.getString('hours', props.currentLocale)}\n      </span>\n      <span\n        className={props.timeUnit === DAYS ? styles.timeUnitSelected : null}\n        onClick={() => props.onSelectTimeUnit(DAYS)}>\n        {i18n.getString('days', props.currentLocale)}\n      </span>\n    </div>\n  );\n}\n\nTimeInput.propTypes = {\n  currentLocale: PropTypes.string.isRequired,\n  timeValue: PropTypes.string,\n  timeUnit: PropTypes.number,\n  inputRef: PropTypes.func.isRequired,\n  onTimeValueChange: PropTypes.func.isRequired,\n  onSelectTimeUnit: PropTypes.func.isRequired,\n};\n\nTimeInput.defaultProps = {\n  timeValue: '',\n  timeUnit: MINS,\n};\n\nexport default class ReplyWithMessage extends Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      type: ON_MY_WAY,\n      customValue: '',\n      callYouTimeValue: '',\n      callYouTimeUnit: MINS,\n      callMeTimeValue: '',\n      callMeTimeUnit: MINS,\n    };\n\n    this.onSelectType = (index) => {\n      this.setState({\n        type: index,\n      });\n      this.props.onChange(this._getValue());\n    };\n\n    this.onCustomValueChange = (e) => {\n      const value = e.target.value;\n      this.setState({\n        customValue: value,\n      });\n      this.props.onChange(this._getValue());\n    };\n\n    this.onCallYouTimeValueChange = (e) => {\n      const value = e.target.value;\n      this.setState({\n        callYouTimeValue: value.replace(cleanRegex, ''),\n      });\n    };\n\n    this.onCallYouTimeUnitChange = (unit) => {\n      this.setState({\n        callYouTimeUnit: unit,\n      });\n    };\n\n    this.onCallMeTimeValueChange = (e) => {\n      const value = e.target.value;\n      this.setState({\n        callMeTimeValue: value.replace(cleanRegex, ''),\n      });\n    };\n\n    this.onCallMeTimeUnitChange = (unit) => {\n      this.setState({\n        callMeTimeUnit: unit,\n      });\n    };\n\n    this.onReply = () => {\n      this.props.onReply(this._getValue());\n    };\n    this.onCallYouInputRef = (input) => {\n      this.callYouInputRef = input;\n    };\n    this.onCallMeInputRef = (input) => {\n      this.callMeInputRef = input;\n    };\n  }\n\n  _getValue() {\n    const value = { replyType: 0 };\n    if (this.state.type === CUSTOM_MESSAGE) {\n      value.replyText = this.state.customValue;\n    }\n    if (this.state.type === ON_MY_WAY) {\n      value.replyText = 'On my way';\n    }\n    if (this.state.type < 2) {\n      value.replyType = 1;\n      value.callbackDirection = this.state.type;\n      if (this.state.type === 0) {\n        value.timeValue = this.state.callYouTimeValue;\n        value.timeUnits = this.state.callYouTimeUnit;\n        value.replyText = this.state.callYouTimeValue;\n      } else {\n        value.timeValue = this.state.callMeTimeValue;\n        value.timeUnits = this.state.callMeTimeUnit;\n        value.replyText = this.state.callMeTimeValue;\n      }\n    }\n    return value;\n  }\n\n  render() {\n    const {\n      className,\n      onCancel,\n      currentLocale,\n    } = this.props;\n    const disableButton = isBlank(this._getValue().replyText);\n    return (\n      <div className={classnames(styles.root, className)}>\n        <div className={styles.messages}>\n          <div\n            onClick={() => {\n              this.onSelectType(CALL_YOU);\n              setTimeout(() => {\n                this.callYouInputRef.focus();\n              }, 100);\n            }}\n            className={classnames(\n              styles.messageItem, this.state.type === CALL_YOU ? styles.active : null\n            )}\n          >\n            <div className={styles.label}>{i18n.getString('willCallYouBackIn', currentLocale)}...</div>\n            <div className={styles.inputField}>\n              <TimeInput\n                currentLocale={currentLocale}\n                timeValue={this.state.callYouTimeValue}\n                timeUnit={this.state.callYouTimeUnit}\n                onTimeValueChange={this.onCallYouTimeValueChange}\n                onSelectTimeUnit={this.onCallYouTimeUnitChange}\n                inputRef={this.onCallYouInputRef}\n              />\n            </div>\n          </div>\n          <div\n            onClick={() => {\n              this.onSelectType(CALL_ME);\n              setTimeout(() => {\n                this.callMeInputRef.focus();\n              }, 100);\n            }}\n            className={classnames(\n              styles.messageItem, this.state.type === CALL_ME ? styles.active : null\n            )}\n          >\n            <div className={styles.label}>{i18n.getString('callMeBackIn', currentLocale)}...</div>\n            <div className={styles.inputField}>\n              <TimeInput\n                currentLocale={currentLocale}\n                timeValue={this.state.callMeTimeValue}\n                timeUnit={this.state.callMeTimeUnit}\n                onTimeValueChange={this.onCallMeTimeValueChange}\n                onSelectTimeUnit={this.onCallMeTimeUnitChange}\n                inputRef={this.onCallMeInputRef}\n              />\n            </div>\n          </div>\n          <div\n            onClick={() => this.onSelectType(ON_MY_WAY)}\n            className={classnames(\n              styles.messageItem, this.state.type === ON_MY_WAY ? styles.active : null\n            )}\n          >\n            <div className={styles.label}>{i18n.getString('onMyWay', currentLocale)}</div>\n          </div>\n          <div\n            onClick={() => {\n              this.onSelectType(CUSTOM_MESSAGE);\n              setTimeout(() => {\n                this.customValueInput.focus();\n              }, 100);\n            }}\n            className={classnames(\n              styles.messageItem, this.state.type === CUSTOM_MESSAGE ? styles.active : null\n            )}\n          >\n            <div className={styles.label}>{i18n.getString('customMessage', currentLocale)}</div>\n            <div className={styles.inputField}>\n              <textarea\n                value={this.state.customValue}\n                maxLength={50}\n                onChange={this.onCustomValueChange}\n                ref={(input) => { this.customValueInput = input; }}\n              />\n            </div>\n          </div>\n        </div>\n        <div className={styles.buttonGroup}>\n          <Button\n            className={styles.cancelButton}\n            onClick={onCancel}\n          >\n            {i18n.getString('cancel', currentLocale)}\n          </Button>\n          <Button\n            className={\n              classnames(styles.replyButton, disableButton ? styles.disabled : null)\n            }\n            onClick={this.onReply}\n            disabled={disableButton}\n          >\n            <span className={styles.buttonText}>\n              {i18n.getString('send', currentLocale)}\n            </span>\n          </Button>\n        </div>\n      </div>\n    );\n  }\n}\n\nReplyWithMessage.propTypes = {\n  className: PropTypes.string,\n  onCancel: PropTypes.func.isRequired,\n  onReply: PropTypes.func.isRequired,\n  currentLocale: PropTypes.string.isRequired,\n  onChange: PropTypes.func,\n};\n\nReplyWithMessage.defaultProps = {\n  className: null,\n  onChange: undefined,\n};\n"]}