{"version":3,"sources":["components/ContactDisplay/index.js"],"names":["ContactDisplay","displayFomatter","entityName","entityType","phoneNumber","currentLocale","brand","typeName","getString","className","contactMatches","selected","onSelectContact","disabled","isLogging","fallBackName","enableContactFallback","areaCode","countryCode","groupNumbers","showType","selectClassName","showPlaceholder","stopPropagation","contentEl","display","join","length","title","name","options","placeholder","select","entity","value","root","propTypes","string","arrayOf","any","isRequired","number","func","bool","defaultProps","undefined"],"mappings":"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","file":"index.js","sourcesContent":["import React from 'react';\r\nimport PropTypes from 'prop-types';\r\nimport classnames from 'classnames';\r\nimport formatNumber from 'ringcentral-integration/lib/formatNumber';\r\nimport formatMessage from 'format-message';\r\nimport DropdownSelect from '../DropdownSelect';\r\nimport i18n from './i18n';\r\nimport styles from './styles.scss';\r\nimport phoneSourceNames from '../../lib/phoneSourceNames';\r\n\r\nconst displayFomatter = ({\r\n  entityName,\r\n  entityType,\r\n  phoneNumber,\r\n  currentLocale,\r\n  brand,\r\n}) => {\r\n  let typeName;\r\n  if (entityType) {\r\n    typeName = formatMessage(\r\n      phoneSourceNames.getString(entityType, currentLocale),\r\n      { brand }\r\n    );\r\n  }\r\n  if (phoneNumber && entityName && entityType) {\r\n    return `${entityName} | ${typeName} ${phoneNumber}`;\r\n  } else if (entityName && entityType) {\r\n    return `${entityName} | ${typeName}`;\r\n  } else if (entityName) {\r\n    return entityName;\r\n  } else if (phoneNumber) {\r\n    return `${phoneNumber}`;\r\n  }\r\n  return '';\r\n};\r\n\r\nexport default function ContactDisplay({\r\n  className,\r\n  contactMatches,\r\n  selected,\r\n  onSelectContact,\r\n  disabled,\r\n  isLogging,\r\n  fallBackName,\r\n  enableContactFallback,\r\n  areaCode,\r\n  countryCode,\r\n  phoneNumber,\r\n  currentLocale,\r\n  groupNumbers,\r\n  showType,\r\n  selectClassName,\r\n  showPlaceholder,\r\n  brand,\r\n  stopPropagation,\r\n}) {\r\n  let contentEl;\r\n  if (groupNumbers) {\r\n    const display = groupNumbers.join(', ');\r\n    contentEl = (\r\n      <div title={display}>\r\n        {display}\r\n      </div>\r\n    );\r\n  } else if (contactMatches.length === 0) {\r\n    const display = (enableContactFallback && fallBackName) ||\r\n      (phoneNumber && formatNumber({\r\n        phoneNumber,\r\n        countryCode,\r\n        areaCode,\r\n      })) ||\r\n      i18n.getString('unknownNumber', currentLocale);\r\n    const title = (enableContactFallback && fallBackName) ||\r\n      phoneNumber || '';\r\n    contentEl = (\r\n      <div title={title}>\r\n        {display}\r\n      </div>\r\n    );\r\n  } else if (contactMatches.length === 1) {\r\n    const display = contactMatches[0].name;\r\n    const title = displayFomatter({\r\n      entityName: display,\r\n      entityType: contactMatches[0].entityType,\r\n      phoneNumber,\r\n    });\r\n    contentEl = (\r\n      <div title={title}>\r\n        {display}\r\n      </div>\r\n    );\r\n  } else if (contactMatches.length > 1) {\r\n    const options = [\r\n      ...contactMatches,\r\n    ];\r\n    let placeholder;\r\n    if (showPlaceholder) {\r\n      placeholder = i18n.getString('select', currentLocale);\r\n    }\r\n    contentEl = (\r\n      <DropdownSelect\r\n        className={classnames(styles.select, selectClassName)}\r\n        value={`${selected}`}\r\n        onChange={onSelectContact}\r\n        disabled={disabled || isLogging}\r\n        options={options}\r\n        placeholder={placeholder}\r\n        renderFunction={entity => (\r\n          displayFomatter({\r\n            entityName: entity.name,\r\n            entityType: entity.entityType,\r\n            brand,\r\n            currentLocale,\r\n          })\r\n        )}\r\n        renderValue={value => (\r\n          displayFomatter({\r\n            entityName: options[value].name,\r\n            entityType: showType && options[value].entityType,\r\n            brand,\r\n            currentLocale,\r\n          })\r\n        )}\r\n        renderTitle={entity => (\r\n          entity ? displayFomatter({\r\n            entityName: entity.name,\r\n            entityType: entity.entityType,\r\n            phoneNumber,\r\n            brand,\r\n            currentLocale,\r\n          }) : phoneNumber)\r\n        }\r\n        dropdownAlign=\"left\"\r\n        titleEnabled\r\n        noPadding\r\n        stopPropagation={stopPropagation}\r\n      />\r\n    );\r\n  }\r\n  return (\r\n    <div\r\n      className={classnames(\r\n        styles.root,\r\n        className,\r\n      )} >\r\n      {contentEl}\r\n    </div>\r\n  );\r\n}\r\nContactDisplay.propTypes = {\r\n  className: PropTypes.string,\r\n  contactMatches: PropTypes.arrayOf(PropTypes.any).isRequired,\r\n  selected: PropTypes.number.isRequired,\r\n  onSelectContact: PropTypes.func,\r\n  disabled: PropTypes.bool.isRequired,\r\n  isLogging: PropTypes.bool.isRequired,\r\n  fallBackName: PropTypes.string,\r\n  enableContactFallback: PropTypes.bool,\r\n  areaCode: PropTypes.string.isRequired,\r\n  countryCode: PropTypes.string.isRequired,\r\n  phoneNumber: PropTypes.string,\r\n  currentLocale: PropTypes.string.isRequired,\r\n  groupNumbers: PropTypes.arrayOf(PropTypes.string),\r\n  showType: PropTypes.bool,\r\n  selectClassName: PropTypes.string,\r\n  showPlaceholder: PropTypes.bool,\r\n  brand: PropTypes.string,\r\n  stopPropagation: PropTypes.bool,\r\n};\r\nContactDisplay.defaultProps = {\r\n  className: undefined,\r\n  onSelectContact: undefined,\r\n  fallBackName: '',\r\n  phoneNumber: undefined,\r\n  groupNumbers: undefined,\r\n  enableContactFallback: undefined,\r\n  showType: true,\r\n  selectClassName: undefined,\r\n  showPlaceholder: true,\r\n  brand: undefined,\r\n  stopPropagation: true,\r\n};\r\n"]}