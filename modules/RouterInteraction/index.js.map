{"version":3,"sources":["modules/RouterInteraction/index.js"],"names":["getDefaultHistory","RouterInteraction","history","options","_reducer","_history","store","selectLocationState","state","push","replace","goBack","locationBeforeTransitions","pathname","locationChange"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAAA;;;;AACA;;AACA;;AACA;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAEA,SAASA,iBAAT,GAA6B;AAC3B;AACA;AACA;AACA;AACA;AACA,SAAO,sEAAP;AACD;;IAEoBC,iB;;;AACnB,mCAGG;AAAA,4BAFDC,OAEC;AAAA,QAFDA,OAEC,gCAFSF,mBAET;AAAA,QADEG,OACF;AAAA;;AAAA,uLACUA,OADV;;AAED,UAAKC,QAAL;AACA,UAAKC,QAAL,GAAgBH,OAAhB;AAHC;AAIF;;;;iCACY;AAAA;;AACX,WAAKG,QAAL,GAAgB,4CAAqB,KAAKA,QAA1B,EAAoC,KAAKC,KAAzC,EAAgD;AAC9DC,6BAAqB;AAAA,iBAAM,OAAKC,KAAX;AAAA;AADyC,OAAhD,CAAhB;AAGD;;;sCACiB;AAAA;;AAChB,WAAKH,QAAL,GAAgB,4CAAqB,KAAKA,QAA1B,EAAoC,KAAKC,KAAzC,EAAgD;AAC9DC,6BAAqB;AAAA,iBAAM,OAAKC,KAAX;AAAA;AADyC,OAAhD,CAAhB;AAGD;;;;;;;;;;;;AAYC,iCAAKH,QAAL,EAAcI,IAAd;;;;;;;;;;;;;;;;;;;;;;;;;;;AAIA,kCAAKJ,QAAL,EAAcK,OAAd;;;;;;;;;;;;;;;;;;;;;;;;;;;AAIA,kCAAKL,QAAL,EAAcM,MAAd;;;;;;;;;;;;;;;;;;wBAlBY;AACZ,aAAO,KAAKN,QAAZ;AACD;;;wBAEiB;AAChB,aAAO,KAAKG,KAAL,CAAWI,yBAAX,CAAqCC,QAA5C;AACD;;;wBAeiB;AAChB,aAAO;AACLC;AADK,OAAP;AAGD;;;;kBA7CkBb,iB","file":"index.js","sourcesContent":["import RcModule from 'ringcentral-integration/lib/RcModule';\nimport { useRouterHistory, createMemoryHistory, hashHistory } from 'react-router';\nimport { syncHistoryWithStore, routerReducer, LOCATION_CHANGE } from 'react-router-redux';\nimport proxify from 'ringcentral-integration/lib/proxy/proxify';\n\nfunction getDefaultHistory() {\n  // if (typeof window !== 'undefined') {\n  //   console.debug('hashHistory');\n  //   return hashHistory;\n  // }\n  // console.debug('memoryHistory');\n  return useRouterHistory(createMemoryHistory)();\n}\n\nexport default class RouterInteraction extends RcModule {\n  constructor({\n    history = getDefaultHistory(),\n    ...options\n  }) {\n    super({ ...options });\n    this._reducer = routerReducer;\n    this._history = history;\n  }\n  initialize() {\n    this._history = syncHistoryWithStore(this._history, this.store, {\n      selectLocationState: () => this.state,\n    });\n  }\n  initializeProxy() {\n    this._history = syncHistoryWithStore(this._history, this.store, {\n      selectLocationState: () => this.state,\n    });\n  }\n\n  get history() {\n    return this._history;\n  }\n\n  get currentPath() {\n    return this.state.locationBeforeTransitions.pathname;\n  }\n\n  @proxify\n  async push(...args) {\n    this._history.push(...args);\n  }\n  @proxify\n  async replace(...args) {\n    this._history.replace(...args);\n  }\n  @proxify\n  async goBack(...args) {\n    this._history.goBack(...args);\n  }\n\n  get actionTypes() {\n    return {\n      locationChange: LOCATION_CHANGE\n    };\n  }\n}\n"]}